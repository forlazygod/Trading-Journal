<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Trading Journal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const { Download, Plus, Trash2, TrendingUp, Target, BarChart3, Search, Filter, Calendar, Edit2, Check, X } = lucide;

        const TradingJournal = () => {
            // All states from source
            const [trades, setTrades] = useState([]);
            const [activeTab, setActiveTab] = useState('new');
            const [searchTerm, setSearchTerm] = useState('');
            const [filterDirection, setFilterDirection] = useState('all');
            const [filterResult, setFilterResult] = useState('all');
            const [editingId, setEditingId] = useState(null);
            const [showSuccessMsg, setShowSuccessMsg] = useState(false);
            
            const [formData, setFormData] = useState({
                date: new Date().toISOString().split('T')[0],
                ticker: '', direction: 'Long', entry: '', exit: '',
                size: '', stopLoss: '', target: '', strategy: '',
                setup: '', timeframe: '1D', notes: ''
            });

            // Initial load from localStorage
            useEffect(() => {
                const saved = localStorage.getItem('tradingJournalTrades');
                if (saved) {
                    try { setTrades(JSON.parse(saved)); } catch (e) { console.error('Failed to load trades'); }
                }
            }, []);

            // Persistence & Icon Refresh
            useEffect(() => {
                if (trades.length > 0) localStorage.setItem('tradingJournalTrades', JSON.stringify(trades));
                if (window.lucide) lucide.createIcons();
            }, [trades, activeTab]);

            const handleInputChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });

            // Math Logic from source
            const calculateRR = (entry, stop, target, direction) => {
                const e = parseFloat(entry), s = parseFloat(stop), t = parseFloat(target);
                if (isNaN(e) || isNaN(s) || isNaN(t)) return null;
                const risk = direction === 'Long' ? Math.abs(e - s) : Math.abs(s - e);
                const reward = direction === 'Long' ? Math.abs(t - e) : Math.abs(e - t);
                return risk === 0 ? null : (reward / risk).toFixed(2);
            };

            const calculateActualRR = (entry, exit, stop, direction) => {
                const e = parseFloat(entry), x = parseFloat(exit), s = parseFloat(stop);
                if (isNaN(e) || isNaN(x) || isNaN(s)) return null;
                const risk = direction === 'Long' ? Math.abs(e - s) : Math.abs(s - e);
                const actualReward = direction === 'Long' ? (x - e) : (e - x);
                return risk === 0 ? null : (actualReward / risk).toFixed(2);
            };

            const calculatePnL = (entry, exit, size, direction) => {
                const e = parseFloat(entry), x = parseFloat(exit), sz = parseFloat(size);
                if (isNaN(e) || isNaN(x) || isNaN(sz)) return 0;
                return direction === 'Long' ? ((x - e) * sz).toFixed(2) : ((e - x) * sz).toFixed(2);
            };

            const calculatePnLPercent = (entry, exit, direction) => {
                const e = parseFloat(entry), x = parseFloat(exit);
                if (isNaN(e) || isNaN(x) || e === 0) return 0;
                return (direction === 'Long' ? ((x - e) / e) * 100 : ((e - x) / e) * 100).toFixed(2);
            };

            // CRUDActions
            const addTrade = () => {
                if (!formData.date || !formData.ticker || !formData.entry || !formData.exit) return alert('Please fill in: Date, Ticker, Entry, Exit');
                const pnl = calculatePnL(formData.entry, formData.exit, formData.size, formData.direction);
                const pnlPercent = calculatePnLPercent(formData.entry, formData.exit, formData.direction);
                const plannedRR = calculateRR(formData.entry, formData.stopLoss, formData.target, formData.direction);
                const actualRR = calculateActualRR(formData.entry, formData.exit, formData.stopLoss, formData.direction);
                
                setTrades([{ id: Date.now(), ...formData, pnl: parseFloat(pnl), pnlPercent: parseFloat(pnlPercent), plannedRR, actualRR }, ...trades]);
                setFormData({...formData, ticker: '', entry: '', exit: '', size: '', stopLoss: '', target: '', strategy: '', setup: '', notes: ''});
                setShowSuccessMsg(true);
                setTimeout(() => setShowSuccessMsg(false), 3000);
            };

            const deleteTrade = (id) => { if (confirm('Delete this trade?')) setTrades(trades.filter(t => t.id !== id)); };

            const startEdit = (trade) => { setEditingId(trade.id); setFormData(trade); setActiveTab('new'); };

            const updateTrade = () => {
                const pnl = calculatePnL(formData.entry, formData.exit, formData.size, formData.direction);
                const pnlPercent = calculatePnLPercent(formData.entry, formData.exit, formData.direction);
                const plannedRR = calculateRR(formData.entry, formData.stopLoss, formData.target, formData.direction);
                const actualRR = calculateActualRR(formData.entry, formData.exit, formData.stopLoss, formData.direction);
                
                setTrades(trades.map(t => t.id === editingId ? { ...formData, id: editingId, pnl: parseFloat(pnl), pnlPercent: parseFloat(pnlPercent), plannedRR, actualRR } : t));
                setEditingId(null);
                setFormData({ date: new Date().toISOString().split('T')[0], ticker: '', direction: 'Long', entry: '', exit: '', size: '', stopLoss: '', target: '', strategy: '', setup: '', timeframe: '1D', notes: '' });
                setShowSuccessMsg(true);
                setTimeout(() => setShowSuccessMsg(false), 3000);
            };

            const cancelEdit = () => { setEditingId(null); setFormData({ date: new Date().toISOString().split('T')[0], ticker: '', direction: 'Long', entry: '', exit: '', size: '', stopLoss: '', target: '', strategy: '', setup: '', timeframe: '1D', notes: '' }); };

            const filteredTrades = trades.filter(trade => {
                const matchesSearch = trade.ticker.toLowerCase().includes(searchTerm.toLowerCase()) || trade.strategy.toLowerCase().includes(searchTerm.toLowerCase()) || trade.setup.toLowerCase().includes(searchTerm.toLowerCase());
                const matchesDirection = filterDirection === 'all' || trade.direction === filterDirection;
                const matchesResult = filterResult === 'all' || (filterResult === 'win' && trade.pnl > 0) || (filterResult === 'loss' && trade.pnl < 0);
                return matchesSearch && matchesDirection && matchesResult;
            });

            // Statistics Engine
            const stats = useMemo(() => {
                if (trades.length === 0) return null;
                const winners = trades.filter(t => t.pnl > 0);
                const losers = trades.filter(t => t.pnl < 0);
                const totalPnL = trades.reduce((sum, t) => sum + t.pnl, 0);
                const winRate = (winners.length / trades.length * 100).toFixed(1);
                const avgWin = winners.length > 0 ? (winners.reduce((sum, t) => sum + t.pnl, 0) / winners.length).toFixed(2) : 0;
                const avgLoss = losers.length > 0 ? (losers.reduce((sum, t) => sum + t.pnl, 0) / losers.length).toFixed(2) : 0;
                const profitFactor = avgLoss !== 0 ? Math.abs(avgWin / avgLoss).toFixed(2) : 'N/A';
                const tradesWithRR = trades.filter(t => t.actualRR !== null);
                const avgRR = tradesWithRR.length > 0 ? (tradesWithRR.reduce((sum, t) => sum + parseFloat(t.actualRR), 0) / tradesWithRR.length).toFixed(2) : 'N/A';
                const expectancy = ((winners.length / trades.length) * avgWin) + ((losers.length / trades.length) * avgLoss);

                let currentStreak = 0, maxWinStreak = 0, maxLossStreak = 0, tempLossStreak = 0;
                [...trades].reverse().forEach(t => {
                    if (t.pnl > 0) { currentStreak++; tempLossStreak = 0; maxWinStreak = Math.max(maxWinStreak, currentStreak); }
                    else { tempLossStreak++; currentStreak = 0; maxLossStreak = Math.max(maxLossStreak, tempLossStreak); }
                });

                return {
                    totalTrades: trades.length, winners: winners.length, losers: losers.length, winRate, totalPnL: totalPnL.toFixed(2),
                    avgWin, avgLoss, profitFactor, avgRR, expectancy: expectancy.toFixed(2),
                    biggestWin: winners.length > 0 ? Math.max(...winners.map(t => t.pnl)).toFixed(2) : 0,
                    biggestLoss: losers.length > 0 ? Math.min(...losers.map(t => t.pnl)).toFixed(2) : 0,
                    maxWinStreak, maxLossStreak
                };
            }, [trades]);

            const exportCSV = () => {
                const headers = ['Date', 'Ticker', 'Direction', 'Entry', 'Exit', 'Size', 'Stop Loss', 'Target', 'P&L', 'P&L %', 'Planned R:R', 'Actual R:R', 'Strategy', 'Setup', 'Timeframe', 'Notes'].join(',');
                const rows = trades.map(t => [t.date, t.ticker, t.direction, t.entry, t.exit, t.size, t.stopLoss, t.target, t.pnl, t.pnlPercent, t.plannedRR || '', t.actualRR || '', `"${t.strategy}"`, `"${t.setup}"`, t.timeframe, `"${t.notes}"`].join(',')).join('\n');
                const blob = new Blob([[headers, rows].join('\n')], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a'); a.href = url; a.download = `trading_journal_${new Date().toISOString().split('T')[0]}.csv`; a.click();
            };

            const currentRR = calculateRR(formData.entry, formData.stopLoss, formData.target, formData.direction);

            return (
                <div className="min-h-screen p-4">
                    <div className="max-w-7xl mx-auto">
                        {showSuccessMsg && (
                            <div className="fixed top-4 right-4 bg-emerald-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in flex items-center gap-2">
                                <Check size={20} /> Trade {editingId ? 'updated' : 'added'} successfully!
                            </div>
                        )}
                        <div className="bg-white/95 backdrop-blur rounded-2xl shadow-2xl p-6">
                            <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                                <div>
                                    <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-600 via-violet-600 to-pink-600 bg-clip-text text-transparent">Trading Journal</h1>
                                    <p className="text-slate-600 text-sm mt-1">Track, Analyze, Improve</p>
                                </div>
                                <button onClick={exportCSV} className="flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition shadow-lg"><Download size={18} /> Export CSV</button>
                            </div>

                            {/* Stats Bar */}
                            {stats && (
                                <div className="grid grid-cols-2 md:grid-cols-5 gap-3 mb-6 p-4 bg-gradient-to-r from-slate-50 to-blue-50 rounded-xl border border-slate-200">
                                    <div className="text-center"><div className="text-2xl font-bold text-slate-800">{stats.totalTrades}</div><div className="text-xs text-slate-600">Trades</div></div>
                                    <div className="text-center"><div className="text-2xl font-bold text-emerald-600">{stats.winRate}%</div><div className="text-xs text-slate-600">Win Rate</div></div>
                                    <div className="text-center"><div className={`text-2xl font-bold ${stats.totalPnL >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>${stats.totalPnL}</div><div className="text-xs text-slate-600">Total P&L</div></div>
                                    <div className="text-center"><div className="text-2xl font-bold text-violet-600">{stats.avgRR}</div><div className="text-xs text-slate-600">Avg R:R</div></div>
                                    <div className="text-center"><div className={`text-2xl font-bold ${stats.expectancy >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>${stats.expectancy}</div><div className="text-xs text-slate-600">Expectancy</div></div>
                                </div>
                            )}

                            {/* Tabs */}
                            <div className="flex gap-2 border-b-2 border-slate-200 mb-6">
                                {['new', 'history', 'stats'].map(tab => (
                                    <button key={tab} onClick={() => { setActiveTab(tab); if(tab !== 'new') cancelEdit(); }} className={`pb-3 px-6 font-semibold transition relative ${activeTab === tab ? 'text-blue-600' : 'text-slate-500 hover:text-slate-700'}`}>
                                        {tab === 'new' ? (editingId ? 'Edit Trade' : 'New Trade') : tab === 'history' ? 'Trade History' : 'Statistics'}
                                        {activeTab === tab && <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-600 to-violet-600"></div>}
                                    </button>
                                ))}
                            </div>

                            {/* Tab Content Logic exactly as per Source */}
                            {activeTab === 'new' && (
                                <div className="space-y-5 animate-fade-in">
                                    {editingId && (
                                        <div className="bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg flex justify-between items-center">
                                            <div className="flex items-center gap-2"><Edit2 size={20} className="text-amber-600" /><span className="font-semibold text-amber-900">Editing trade</span></div>
                                            <button onClick={cancelEdit} className="text-amber-600 flex items-center gap-1"><X size={18} /> Cancel</button>
                                        </div>
                                    )}
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div><label className="block text-sm font-semibold text-slate-700 mb-2">Date *</label><input type="date" name="date" value={formData.date} onChange={handleInputChange} className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition" /></div>
                                        <div><label className="block text-sm font-semibold text-slate-700 mb-2">Ticker *</label><input type="text" name="ticker" value={formData.ticker} onChange={handleInputChange} placeholder="AAPL" className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition uppercase" /></div>
                                        <div><label className="block text-sm font-semibold text-slate-700 mb-2">Direction</label><select name="direction" value={formData.direction} onChange={handleInputChange} className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition"><option>Long</option><option>Short</option></select></div>
                                    </div>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div><label className="block text-sm font-semibold text-slate-700 mb-2">Entry Price *</label><input type="number" step="0.01" name="entry" value={formData.entry} onChange={handleInputChange} placeholder="150.50" className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition" /></div>
                                        <div><label className="block text-sm font-semibold text-slate-700 mb-2">Exit Price *</label><input type="number" step="0.01" name="exit" value={formData.exit} onChange={handleInputChange} placeholder="155.75" className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition" /></div>
                                        <div><label className="block text-sm font-semibold text-slate-700 mb-2">Position Size</label><input type="number" name="size" value={formData.size} onChange={handleInputChange} placeholder="100" className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition" /></div>
                                        <div><label className="block text-sm font-semibold text-slate-700 mb-2">Timeframe</label><select name="timeframe" value={formData.timeframe} onChange={handleInputChange} className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition"><option>1m</option><option>5m</option><option>15m</option><option>1h</option><option>4h</option><option>1D</option></select></div>
                                    </div>
                                    <div className="bg-gradient-to-br from-violet-50 to-blue-50 p-5 rounded-xl border-2 border-violet-200">
                                        <h3 className="text-sm font-bold text-slate-800 mb-4 flex items-center gap-2"><Target size={18} className="text-violet-600" /> Risk Management</h3>
                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <div><label className="block text-sm font-medium text-slate-700 mb-2">Stop Loss</label><input type="number" step="0.01" name="stopLoss" value={formData.stopLoss} onChange={handleInputChange} placeholder="148.00" className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-violet-500 transition bg-white" /></div>
                                            <div><label className="block text-sm font-medium text-slate-700 mb-2">Target</label><input type="number" step="0.01" name="target" value={formData.target} onChange={handleInputChange} placeholder="160.00" className="w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-violet-500 transition bg-white" /></div>
                                            <div className="flex items-end"><div className="w-full px-4 py-3 bg-gradient-to-br from-violet-100 to-purple-100 rounded-xl border-2 border-violet-300"><div className="text-xs font-medium text-slate-600">Planned R:R</div><div className="text-3xl font-bold text-violet-600">{currentRR ? `${currentRR}:1` : '--'}</div></div></div>
                                        </div>
                                    </div>
                                    <button onClick={editingId ? updateTrade : addTrade} className="w-full bg-gradient-to-r from-blue-600 via-violet-600 to-purple-600 text-white py-4 rounded-xl font-bold shadow-xl hover:shadow-2xl text-lg flex justify-center items-center gap-2 transition">{editingId ? <Check size={22} /> : <Plus size={22} />} {editingId ? 'Update Trade' : 'Add Trade'}</button>
                                </div>
                            )}

                            {activeTab === 'history' && (
                                <div className="animate-fade-in">
                                    <div className="mb-6 flex flex-col md:flex-row gap-3">
                                        <div className="flex-1 relative"><Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} /><input type="text" placeholder="Search by ticker, strategy, setup..." value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className="w-full pl-10 pr-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition" /></div>
                                        <div className="flex gap-3">
                                            <select value={filterDirection} onChange={(e) => setFilterDirection(e.target.value)} className="px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition"><option value="all">All Directions</option><option value="Long">Long Only</option><option value="Short">Short Only</option></select>
                                            <select value={filterResult} onChange={(e) => setFilterResult(e.target.value)} className="px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 transition"><option value="all">All Results</option><option value="win">Winners</option><option value="loss">Losers</option></select>
                                        </div>
                                    </div>
                                    {filteredTrades.length === 0 ? (
                                        <div className="text-center py-16 text-slate-500"><TrendingUp size={64} className="mx-auto mb-4 opacity-30" /><p className="text-lg">No trades match your filters</p></div>
                                    ) : (
                                        <div className="space-y-4">
                                            {filteredTrades.map(trade => (
                                                <div key={trade.id} className="group border-2 border-slate-200 rounded-2xl p-5 hover:shadow-xl hover:border-blue-300 transition-all bg-gradient-to-br from-white to-slate-50">
                                                    <div className="flex justify-between items-start mb-4">
                                                        <div className="flex items-center gap-3 flex-wrap">
                                                            <div className="text-2xl font-bold text-slate-800">{trade.ticker}</div>
                                                            <span className={`px-3 py-1.5 rounded-full text-sm font-bold ${trade.direction === 'Long' ? 'bg-emerald-100 text-emerald-800' : 'bg-rose-100 text-rose-800'}`}>{trade.direction}</span>
                                                            <span className={`text-2xl font-bold ${trade.pnl >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>{trade.pnl >= 0 ? '+' : ''}${trade.pnl}</span>
                                                            <span className="text-lg text-slate-600">({trade.pnl >= 0 ? '+' : ''}{trade.pnlPercent}%)</span>
                                                            {trade.actualRR && <span className="px-3 py-1.5 bg-violet-100 text-violet-800 rounded-full text-sm font-bold">{trade.actualRR}R</span>}
                                                        </div>
                                                        <div className="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                                            <button onClick={() => startEdit(trade)} className="text-blue-600 hover:bg-blue-50 p-2 rounded-lg"><Edit2 size={18} /></button>
                                                            <button onClick={() => deleteTrade(trade.id)} className="text-red-500 hover:bg-red-50 p-2 rounded-lg"><Trash2 size={18} /></button>
                                                        </div>
                                                    </div>
                                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm mb-3">
                                                        <div className="bg-white rounded-lg p-3 border border-slate-200"><span className="text-slate-500 font-medium">Date:</span><div className="font-semibold text-slate-800">{trade.date}</div></div>
                                                        <div className="bg-white rounded-lg p-3 border border-slate-200"><span className="text-slate-500 font-medium">Entry:</span><div className="font-semibold text-slate-800">${trade.entry}</div></div>
                                                        <div className="bg-white rounded-lg p-3 border border-slate-200"><span className="text-slate-500 font-medium">Exit:</span><div className="font-semibold text-slate-800">${trade.exit}</div></div>
                                                        <div className="bg-white rounded-lg p-3 border border-slate-200"><span className="text-slate-500 font-medium">Size:</span><div className="font-semibold text-slate-800">{trade.size || '-'}</div></div>
                                                    </div>
                                                    <div className="flex gap-2 text-sm flex-wrap">
                                                        {trade.strategy && <span className="px-3 py-1 bg-blue-100 text-blue-800 rounded-full font-medium">{trade.strategy}</span>}
                                                        {trade.setup && <span className="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full font-medium">{trade.setup}</span>}
                                                        {trade.timeframe && <span className="px-3 py-1 bg-amber-100 text-amber-800 rounded-full font-medium">{trade.timeframe}</span>}
                                                        {trade.plannedRR && <span className="px-3 py-1 bg-purple-100 text-purple-800 rounded-full font-medium">Planned: {trade.plannedRR}R</span>}
                                                    </div>
                                                    {trade.notes && <div className="text-sm text-slate-700 bg-slate-100 rounded-lg p-3 mt-3 border border-slate-200">{trade.notes}</div>}
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            )}

                            {activeTab === 'stats' && stats && (
                                <div className="space-y-6 animate-fade-in">
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                        <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl border-2 border-blue-200 shadow-lg"><div className="flex items-center gap-2 mb-2"><BarChart3 className="text-blue-600" size={24} /><h3 className="font-bold text-slate-700">Total Trades</h3></div><p className="text-4xl font-bold text-blue-600">{stats.totalTrades}</p></div>
                                        <div className="bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-2xl border-2 border-emerald-200 shadow-lg"><div className="flex items-center gap-2 mb-2"><TrendingUp className="text-emerald-600" size={24} /><h3 className="font-bold text-slate-700">Win Rate</h3></div><p className="text-4xl font-bold text-emerald-600">{stats.winRate}%</p><p className="text-sm text-slate-600 mt-1">{stats.winners}W / {stats.losers}L</p></div>
                                        <div className={`bg-gradient-to-br ${stats.totalPnL >= 0 ? 'from-emerald-50 to-emerald-100 border-emerald-200' : 'from-red-50 to-red-100 border-red-200'} p-6 rounded-2xl border-2 shadow-lg`}><div className="flex items-center gap-2 mb-2"><h3 className="font-bold text-slate-700">Total P&L</h3></div><p className={`text-4xl font-bold ${stats.totalPnL >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>${stats.totalPnL}</p></div>
                                        <div className="bg-gradient-to-br from-violet-50 to-violet-100 p-6 rounded-2xl border-2 border-violet-200 shadow-lg"><div className="flex items-center gap-2 mb-2"><Target className="text-violet-600" size={24} /><h3 className="font-bold text-slate-700">Avg R:R</h3></div><p className="text-4xl font-bold text-violet-600">{stats.avgRR}</p></div>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                        <div className="bg-white p-6 rounded-2xl border-2 border-slate-200 shadow-lg"><h3 className="font-bold text-slate-700 mb-3">Average Win</h3><p className="text-3xl font-bold text-emerald-600">${stats.avgWin}</p></div>
                                        <div className="bg-white p-6 rounded-2xl border-2 border-slate-200 shadow-lg"><h3 className="font-bold text-slate-700 mb-3">Average Loss</h3><p className="text-3xl font-bold text-red-600">${stats.avgLoss}</p></div>
                                        <div className="bg-white p-6 rounded-2xl border-2 border-slate-200 shadow-lg"><h3 className="font-bold text-slate-700 mb-3">Profit Factor</h3><p className="text-3xl font-bold text-blue-600">{stats.profitFactor}</p></div>
                                        <div className="bg-white p-6 rounded-2xl border-2 border-slate-200 shadow-lg"><h3 className="font-bold text-slate-700 mb-3">Expectancy</h3><p className={`text-3xl font-bold ${stats.expectancy >= 0 ? 'text-emerald-600' : 'text-red-600'}`}>${stats.expectancy}</p></div>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div className="bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-2xl border-2 border-emerald-300 shadow-lg"><h3 className="font-bold text-slate-700 mb-3">Best Performance</h3><div className="space-y-2"><div className="flex justify-between"><span className="text-slate-600">Biggest Win:</span><span className="text-xl font-bold text-emerald-600">${stats.biggestWin}</span></div><div className="flex justify-between"><span className="text-slate-600">Win Streak:</span><span className="text-xl font-bold text-emerald-600">{stats.maxWinStreak}</span></div></div></div>
                                        <div className="bg-gradient-to-br from-red-50 to-rose-50 p-6 rounded-2xl border-2 border-red-300 shadow-lg"><h3 className="font-bold text-slate-700 mb-3">Areas to Improve</h3><div className="space-y-2"><div className="flex justify-between"><span className="text-slate-600">Biggest Loss:</span><span className="text-xl font-bold text-red-600">${stats.biggestLoss}</span></div><div className="flex justify-between"><span className="text-slate-600">Loss Streak:</span><span className="text-xl font-bold text-red-600">{stats.maxLossStreak}</span></div></div></div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TradingJournal />);
    </script>
</body>
</html>
